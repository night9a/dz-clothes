{% extends "base.html" %}
{% block content %}
<div class="container product-page">
    <div class="product-detail">
        <div class="product-detail-image">
            {% if product.image_url %}
            <img src="{{ product.image_url }}" alt="{{ product.name_fr if lang == 'fr' else product.name_ar }}">
            {% else %}
            <div class="product-placeholder"></div>
            {% endif %}
        </div>
        <div class="product-detail-info">
            <h1>{{ product.name_fr if lang == 'fr' else product.name_ar }}</h1>
            <p class="product-detail-price price-dz">{{ "{:,.0f}".format(product.price) }} DA</p>
            {% if product.description_fr or product.description_ar %}
            <p class="product-detail-desc">{{ product.description_fr if lang == 'fr' else product.description_ar }}</p>
            {% endif %}
            
            <form action="{{ url_for('action_add_to_cart') }}" method="post">
                <input type="hidden" name="product_id" value="{{ product.id }}">
                
                {% if sizes %}
                <div class="form-group">
                    <label>{% if lang == 'ar' %}المقاس{% else %}Taille{% endif %}</label>
                    <select name="option_size" required>
                        {% for size in sizes %}
                        <option value="{{ size }}">{{ size }}</option>
                        {% endfor %}
                    </select>
                </div>
                {% endif %}
                
                {% if colors %}
                <div class="form-group">
                    <label>{% if lang == 'ar' %}اللون{% else %}Couleur{% endif %}</label>
                    <select name="option_color" required>
                        {% for color in colors %}
                        <option value="{{ color }}">{{ color }}</option>
                        {% endfor %}
                    </select>
                </div>
                {% endif %}
                
                <div class="form-group">
                    <label>{% if lang == 'ar' %}الكمية{% else %}Quantité{% endif %}</label>
                    <input type="number" name="quantity" min="1" max="{{ product.stock or 99 }}" value="1">
                </div>
                
                <button type="submit" class="btn btn-primary" {% if product.stock == 0 %}disabled{% endif %}>
                    {% if lang == 'ar' %}أضف للسلة{% else %}Ajouter au panier{% endif %}
                </button>
            </form>
            
            <a href="{{ url_for('shop') }}" class="btn btn-ghost">{% if lang == 'ar' %}العودة{% else %}Retour{% endif %}</a>
        </div>
    </div>
</div>
{% endblock %}